import{j as e}from"./jsx-runtime.D_zvdyIk.js";import{r as x}from"./index.WFquGv8Z.js";/* empty css                            */function F({portfolio:s,onStockSelect:t}){const c=s.totalValue-s.initialCapital,r=c/s.initialCapital*100,i=s.holdings.reduce((n,h)=>n+h.marketValue,0),l=n=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:2}).format(n),d=n=>`${n>=0?"+":""}${n.toFixed(2)}%`;return e.jsxs("div",{className:"trading-card",children:[e.jsx("h2",{children:"Portfolio"}),e.jsxs("div",{className:"portfolio-value",children:[e.jsx("div",{className:"value",children:l(s.totalValue)}),e.jsxs("div",{className:`change ${c>=0?"positive":"negative"}`,children:[l(c)," (",d(r),")"]})]}),e.jsxs("div",{className:"portfolio-stats",children:[e.jsxs("div",{className:"stat-item",children:[e.jsx("div",{className:"label",children:"Cash"}),e.jsx("div",{className:"value",children:l(s.cash)})]}),e.jsxs("div",{className:"stat-item",children:[e.jsx("div",{className:"label",children:"Invested"}),e.jsx("div",{className:"value",children:l(i)})]}),e.jsxs("div",{className:"stat-item",children:[e.jsx("div",{className:"label",children:"Positions"}),e.jsx("div",{className:"value",children:s.holdings.length})]}),e.jsxs("div",{className:"stat-item",children:[e.jsx("div",{className:"label",children:"Cash %"}),e.jsxs("div",{className:"value",children:[(s.cash/s.totalValue*100).toFixed(1),"%"]})]})]}),e.jsx("h2",{style:{marginTop:"1.5rem"},children:"Holdings"}),s.holdings.length===0?e.jsx("div",{className:"empty-state",children:e.jsx("p",{children:"No positions yet"})}):e.jsx("div",{className:"holdings-list",children:s.holdings.map(n=>e.jsxs("div",{className:"holding-item",onClick:()=>t?.(n.symbol),style:{cursor:t?"pointer":"default"},children:[e.jsxs("div",{children:[e.jsx("div",{className:"holding-symbol",children:n.symbol}),e.jsxs("div",{className:"holding-shares",children:[n.shares," shares @ ",l(n.avgCost)]})]}),e.jsxs("div",{className:"holding-value",children:[e.jsx("div",{className:"holding-price",children:l(n.marketValue)}),e.jsxs("div",{className:`holding-pnl ${n.gainLoss>=0?"positive":"negative"}`,children:[l(n.gainLoss)," (",d(n.gainLossPercent),")"]})]})]},n.symbol))}),e.jsxs("div",{style:{marginTop:"1rem",fontSize:"0.75rem",color:"rgba(255, 255, 255, 0.4)",textAlign:"center"},children:["Updated: ",new Date(s.lastUpdated).toLocaleString()]})]})}function E({trades:s}){const t=r=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:2}).format(r),c=r=>new Date(r).toLocaleDateString("en-US",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"});return s.length===0?e.jsxs("div",{className:"trading-card",children:[e.jsx("h2",{children:"Trade Log"}),e.jsxs("div",{className:"empty-state",children:[e.jsx("p",{children:"No trades yet"}),e.jsx("p",{style:{fontSize:"0.75rem",marginTop:"0.5rem"},children:"Trades will appear here when executed"})]})]}):e.jsxs("div",{className:"trading-card",children:[e.jsxs("h2",{children:["Trade Log (",s.length," trades)"]}),e.jsx("div",{className:"trade-log",children:s.map(r=>e.jsxs("div",{className:"trade-item",children:[e.jsxs("div",{className:"trade-header",children:[e.jsxs("div",{className:"trade-action",children:[e.jsx("span",{className:`badge ${r.action.toLowerCase()}`,children:r.action}),e.jsx("span",{className:"trade-symbol",children:r.symbol})]}),e.jsx("span",{className:"trade-time",children:c(r.timestamp)})]}),e.jsxs("div",{className:"trade-details",children:[e.jsxs("span",{children:[r.shares," shares @ ",t(r.price)]}),e.jsx("span",{style:{fontWeight:600},children:t(r.total)})]}),e.jsx("div",{className:"trade-reason",children:r.reason})]},r.id))})]})}const P=["AAPL","MSFT","GOOGL","AMZN","NVDA","META","TSLA","AVGO","ORCL","CRM","JPM","V","MA","BAC","WFC","GS","MS","BLK","AXP","C","UNH","JNJ","LLY","PFE","ABBV","MRK","TMO","ABT","DHR","BMY","PG","KO","PEP","COST","WMT","HD","MCD","NKE","SBUX","TGT","XOM","CVX","COP","CAT","BA","UNP","HON","GE","RTX","LMT"],R={AAPL:{name:"Apple Inc.",sector:"Technology"},MSFT:{name:"Microsoft Corporation",sector:"Technology"},GOOGL:{name:"Alphabet Inc.",sector:"Technology"},AMZN:{name:"Amazon.com Inc.",sector:"Technology"},NVDA:{name:"NVIDIA Corporation",sector:"Technology"},META:{name:"Meta Platforms Inc.",sector:"Technology"},TSLA:{name:"Tesla Inc.",sector:"Technology"},AVGO:{name:"Broadcom Inc.",sector:"Technology"},ORCL:{name:"Oracle Corporation",sector:"Technology"},CRM:{name:"Salesforce Inc.",sector:"Technology"},JPM:{name:"JPMorgan Chase & Co.",sector:"Financial"},V:{name:"Visa Inc.",sector:"Financial"},MA:{name:"Mastercard Inc.",sector:"Financial"},BAC:{name:"Bank of America Corp.",sector:"Financial"},WFC:{name:"Wells Fargo & Co.",sector:"Financial"},GS:{name:"Goldman Sachs Group",sector:"Financial"},MS:{name:"Morgan Stanley",sector:"Financial"},BLK:{name:"BlackRock Inc.",sector:"Financial"},AXP:{name:"American Express Co.",sector:"Financial"},C:{name:"Citigroup Inc.",sector:"Financial"},UNH:{name:"UnitedHealth Group",sector:"Healthcare"},JNJ:{name:"Johnson & Johnson",sector:"Healthcare"},LLY:{name:"Eli Lilly and Co.",sector:"Healthcare"},PFE:{name:"Pfizer Inc.",sector:"Healthcare"},ABBV:{name:"AbbVie Inc.",sector:"Healthcare"},MRK:{name:"Merck & Co. Inc.",sector:"Healthcare"},TMO:{name:"Thermo Fisher Scientific",sector:"Healthcare"},ABT:{name:"Abbott Laboratories",sector:"Healthcare"},DHR:{name:"Danaher Corporation",sector:"Healthcare"},BMY:{name:"Bristol-Myers Squibb",sector:"Healthcare"},PG:{name:"Procter & Gamble Co.",sector:"Consumer"},KO:{name:"Coca-Cola Company",sector:"Consumer"},PEP:{name:"PepsiCo Inc.",sector:"Consumer"},COST:{name:"Costco Wholesale Corp.",sector:"Consumer"},WMT:{name:"Walmart Inc.",sector:"Consumer"},HD:{name:"Home Depot Inc.",sector:"Consumer"},MCD:{name:"McDonald's Corporation",sector:"Consumer"},NKE:{name:"Nike Inc.",sector:"Consumer"},SBUX:{name:"Starbucks Corporation",sector:"Consumer"},TGT:{name:"Target Corporation",sector:"Consumer"},XOM:{name:"Exxon Mobil Corporation",sector:"Energy"},CVX:{name:"Chevron Corporation",sector:"Energy"},COP:{name:"ConocoPhillips",sector:"Energy"},CAT:{name:"Caterpillar Inc.",sector:"Industrial"},BA:{name:"Boeing Company",sector:"Industrial"},UNP:{name:"Union Pacific Corp.",sector:"Industrial"},HON:{name:"Honeywell International",sector:"Industrial"},GE:{name:"General Electric Co.",sector:"Industrial"},RTX:{name:"RTX Corporation",sector:"Industrial"},LMT:{name:"Lockheed Martin Corp.",sector:"Industrial"}};function I(s){return R[s]||{name:s,sector:"Unknown"}}function b({signal:s}){const t=s.score>=0,c=Math.abs(s.score)*50;return e.jsxs("div",{className:"signal-item",children:[e.jsxs("div",{className:"signal-header",children:[e.jsx("span",{className:"signal-name",children:s.name}),e.jsxs("span",{className:`signal-score ${s.score>.1?"positive":s.score<-.1?"negative":"neutral"}`,children:[s.score>=0?"+":"",s.score.toFixed(2)]})]}),e.jsxs("div",{className:"signal-gauge",children:[e.jsx("div",{className:"signal-gauge-center"}),e.jsx("div",{className:`signal-gauge-fill ${t?"positive":"negative"}`,style:{width:`${c}%`}})]}),e.jsx("div",{className:"signal-reason",children:s.reason}),e.jsxs("div",{className:"signal-confidence",children:["Confidence: ",(s.confidence*100).toFixed(0),"%"]})]})}function G(s){switch(s){case"STRONG_BUY":return"strong-buy";case"BUY":return"buy";case"HOLD":return"hold";case"SELL":return"sell";case"STRONG_SELL":return"strong-sell"}}function V({signals:s,selectedStock:t,onStockSelect:c,isAnalyzing:r}){const[i,l]=x.useState(t||P[0]);x.useEffect(()=>{t&&l(t)},[t]);const d=o=>{l(o),c(o)},n=s.get(i),h=I(i);return e.jsxs("div",{className:"trading-card",children:[e.jsx("h2",{children:"Strategy Signals"}),e.jsx("div",{className:"signal-selector",children:e.jsx("select",{value:i,onChange:o=>d(o.target.value),children:P.map(o=>{const j=I(o);return e.jsxs("option",{value:o,children:[o," - ",j.name]},o)})})}),r?e.jsxs("div",{className:"loading",children:[e.jsx("div",{className:"loading-spinner"}),"Analyzing ",i,"..."]}):n?e.jsxs(e.Fragment,{children:[e.jsxs("div",{style:{marginBottom:"1rem",color:"rgba(255, 255, 255, 0.6)"},children:[e.jsx("div",{style:{fontSize:"0.875rem"},children:h.name}),e.jsxs("div",{style:{fontSize:"0.75rem"},children:["Sector: ",h.sector]})]}),e.jsxs("div",{className:"signals-grid",children:[e.jsx(b,{signal:n.momentum}),e.jsx(b,{signal:n.meanReversion}),e.jsx(b,{signal:n.technical}),e.jsx(b,{signal:n.sentiment})]}),e.jsxs("div",{className:"combined-signal",children:[e.jsx("div",{className:"label",children:"Combined Signal"}),e.jsxs("div",{className:"score",style:{color:n.combined>.1?"#22c55e":n.combined<-.1?"#ef4444":"rgba(255, 255, 255, 0.6)"},children:[n.combined>=0?"+":"",n.combined.toFixed(3)]}),e.jsx("div",{className:`recommendation-badge ${G(n.recommendation)}`,children:n.recommendation.replace("_"," ")})]}),e.jsxs("div",{style:{marginTop:"1rem",fontSize:"0.75rem",color:"rgba(255, 255, 255, 0.4)",textAlign:"center"},children:["Analyzed: ",new Date(n.timestamp).toLocaleString()]})]}):e.jsxs("div",{className:"empty-state",children:[e.jsxs("p",{children:["No analysis available for ",i]}),e.jsx("p",{style:{fontSize:"0.75rem",marginTop:"0.5rem"},children:'Click "Run Analysis" to analyze stocks'})]})]})}function H({history:s,initialCapital:t}){const c=x.useMemo(()=>{if(s.length===0)return null;const y=s.map(u=>u.totalValue),p=Math.min(...y,t)*.995,N=Math.max(...y,t)*1.005,a=N-p,m=100,f=100,g={top:10,right:10,bottom:10,left:10},L=m-g.left-g.right,v=f-g.top-g.bottom,C=s.map((u,T)=>{const B=g.left+T/(s.length-1||1)*L,D=g.top+v-(u.totalValue-p)/a*v;return{x:B,y:D,value:u.totalValue,timestamp:u.timestamp}}),M=C.map((u,T)=>`${T===0?"M":"L"} ${u.x} ${u.y}`).join(" "),w=`${M} L ${C[C.length-1].x} ${g.top+v} L ${g.left} ${g.top+v} Z`,O=g.top+v-(t-p)/a*v,A=s[s.length-1]?.totalValue||t,k=A>=t;return{points:C,pathD:M,areaD:w,initialY:O,minValue:p,maxValue:N,isPositive:k,currentValue:A,padding:g,chartWidth:L,chartHeight:v}},[s,t]);if(!c||s.length<2)return e.jsx("div",{className:"performance-chart empty",children:e.jsxs("div",{className:"chart-placeholder",children:[e.jsxs("svg",{width:"48",height:"48",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",children:[e.jsx("path",{d:"M3 3v18h18"}),e.jsx("path",{d:"M18 9l-5 5-4-4-6 6"})]}),e.jsx("p",{children:"Waiting for data..."}),e.jsx("span",{children:"Performance chart will appear after a few runs"})]})});const{pathD:r,areaD:i,initialY:l,isPositive:d,currentValue:n,padding:h,chartWidth:o}=c,j=(n-t)/t*100;return e.jsxs("div",{className:"performance-chart",children:[e.jsxs("div",{className:"chart-header",children:[e.jsx("div",{className:"chart-title",children:"Fund Performance"}),e.jsxs("div",{className:`chart-change ${d?"positive":"negative"}`,children:[d?"+":"",j.toFixed(2),"%"]})]}),e.jsx("div",{className:"chart-container",children:e.jsxs("svg",{viewBox:"0 0 100 100",preserveAspectRatio:"none",children:[e.jsx("defs",{children:e.jsxs("linearGradient",{id:"chartGradient",x1:"0",y1:"0",x2:"0",y2:"1",children:[e.jsx("stop",{offset:"0%",stopColor:d?"#22c55e":"#ef4444",stopOpacity:"0.3"}),e.jsx("stop",{offset:"100%",stopColor:d?"#22c55e":"#ef4444",stopOpacity:"0"})]})}),e.jsx("line",{x1:h.left,y1:l,x2:h.left+o,y2:l,stroke:"rgba(255, 255, 255, 0.2)",strokeDasharray:"2 2",strokeWidth:"0.5"}),e.jsx("path",{d:i,fill:"url(#chartGradient)"}),e.jsx("path",{d:r,fill:"none",stroke:d?"#22c55e":"#ef4444",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",vectorEffect:"non-scaling-stroke"}),e.jsx("circle",{cx:c.points[c.points.length-1].x,cy:c.points[c.points.length-1].y,r:"2",fill:d?"#22c55e":"#ef4444"})]})}),e.jsxs("div",{className:"chart-labels",children:[e.jsx("span",{className:"chart-label-start",children:new Date(s[0].timestamp).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}),e.jsx("span",{className:"chart-label-end",children:new Date(s[s.length-1].timestamp).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]})]})}const S={initialCapital:1e4},U={cash:S.initialCapital,holdings:[],totalValue:S.initialCapital,lastUpdated:new Date().toISOString(),initialCapital:S.initialCapital};function Y(){const[s,t]=x.useState("overview"),[c,r]=x.useState(null),[i,l]=x.useState({portfolio:U,trades:[],signals:{},lastRun:null,history:[]}),[d,n]=x.useState(!0),[h,o]=x.useState(null),j=async()=>{try{const a=await fetch("/api/trading/data");if(!a.ok)throw new Error("Failed to fetch trading data");const m=await a.json();l(m),o(null)}catch(a){console.error("Error fetching trading data:",a),o(a instanceof Error?a.message:"Unknown error")}finally{n(!1)}};x.useEffect(()=>{j();const a=setInterval(j,60*1e3);return()=>clearInterval(a)},[]);const y=new Map(Object.entries(i.signals)),p=a=>Object.values(i.signals).filter(m=>m.recommendation==="BUY"||m.recommendation==="STRONG_BUY").sort((m,f)=>f.combined-m.combined).slice(0,a),N=a=>Object.values(i.signals).filter(m=>m.recommendation==="SELL"||m.recommendation==="STRONG_SELL").sort((m,f)=>m.combined-f.combined).slice(0,a);return d?e.jsx("div",{className:"trading-bot",children:e.jsxs("div",{className:"loading-container",children:[e.jsx("div",{className:"loading-spinner"}),e.jsx("p",{children:"Loading trading bot data..."})]})}):e.jsxs("div",{className:"trading-bot",children:[e.jsxs("header",{className:"trading-header",children:[e.jsxs("div",{className:"header-content",children:[e.jsx("h1",{children:"Paper Trading Bot"}),e.jsx("p",{children:"ML-powered S&P 500 analysis with $10,000 starting capital"})]}),e.jsxs("div",{className:"bot-status",children:[e.jsx("span",{className:"status-dot running"}),e.jsx("span",{className:"status-text",children:"Always Running"}),i.lastRun&&e.jsxs("span",{className:"last-run",children:["Last analysis: ",new Date(i.lastRun).toLocaleString()]})]})]}),h&&e.jsxs("div",{className:"error-banner",children:[e.jsxs("p",{children:["Error loading data: ",h]}),e.jsx("button",{onClick:j,children:"Retry"})]}),e.jsxs("div",{className:"trading-grid",children:[e.jsx("div",{className:"sidebar",children:e.jsx(F,{portfolio:i.portfolio,onStockSelect:a=>{r(a),t("signals")}})}),e.jsxs("div",{className:"main-content",children:[e.jsxs("nav",{className:"tab-nav",children:[e.jsx("button",{className:s==="overview"?"active":"",onClick:()=>t("overview"),children:"Overview"}),e.jsx("button",{className:s==="signals"?"active":"",onClick:()=>t("signals"),children:"Strategy Signals"}),e.jsx("button",{className:s==="log"?"active":"",onClick:()=>t("log"),children:"Trade Log"})]}),s==="overview"&&e.jsxs("div",{className:"overview-grid",style:{display:"grid",gap:"1.5rem"},children:[e.jsxs("div",{className:"trading-card",children:[e.jsx("h2",{children:"Portfolio Performance"}),e.jsx(H,{history:i.history,initialCapital:S.initialCapital})]}),e.jsxs("div",{className:"trading-card",children:[e.jsx("h2",{children:"Current Top Signals"}),Object.keys(i.signals).length===0?e.jsxs("div",{className:"empty-state",children:[e.jsx("p",{children:"No analysis data yet"}),e.jsx("p",{style:{fontSize:"0.75rem",marginTop:"0.5rem"},children:"The bot will analyze stocks on the next scheduled run"})]}):e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem"},children:[e.jsxs("div",{children:[e.jsx("h3",{style:{fontSize:"0.875rem",color:"#22c55e",marginBottom:"0.75rem"},children:"Buy Signals"}),p(5).map(a=>e.jsxs("div",{style:{padding:"0.5rem",background:"rgba(34, 197, 94, 0.1)",borderRadius:"4px",marginBottom:"0.5rem",cursor:"pointer"},onClick:()=>{r(a.symbol),t("signals")},children:[e.jsx("div",{style:{fontWeight:600},children:a.symbol}),e.jsxs("div",{style:{fontSize:"0.75rem",color:"#22c55e"},children:["Score: +",a.combined.toFixed(3)]})]},a.symbol)),p(5).length===0&&e.jsx("div",{style:{color:"rgba(255, 255, 255, 0.5)",fontSize:"0.875rem"},children:"No buy signals"})]}),e.jsxs("div",{children:[e.jsx("h3",{style:{fontSize:"0.875rem",color:"#ef4444",marginBottom:"0.75rem"},children:"Sell Signals"}),N(5).map(a=>e.jsxs("div",{style:{padding:"0.5rem",background:"rgba(239, 68, 68, 0.1)",borderRadius:"4px",marginBottom:"0.5rem",cursor:"pointer"},onClick:()=>{r(a.symbol),t("signals")},children:[e.jsx("div",{style:{fontWeight:600},children:a.symbol}),e.jsxs("div",{style:{fontSize:"0.75rem",color:"#ef4444"},children:["Score: ",a.combined.toFixed(3)]})]},a.symbol)),N(5).length===0&&e.jsx("div",{style:{color:"rgba(255, 255, 255, 0.5)",fontSize:"0.875rem"},children:"No sell signals"})]})]})]}),e.jsxs("div",{className:"trading-card",children:[e.jsx("h2",{children:"Recent Trades"}),i.trades.length===0?e.jsx("div",{className:"empty-state",children:e.jsx("p",{children:"No trades yet"})}):e.jsxs("div",{children:[i.trades.slice(0,3).map(a=>e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",padding:"0.75rem",background:"rgba(255, 255, 255, 0.02)",borderRadius:"8px",marginBottom:"0.5rem"},children:[e.jsxs("div",{children:[e.jsx("span",{style:{color:a.action==="BUY"?"#22c55e":"#ef4444",fontWeight:600},children:a.action})," ",e.jsx("span",{style:{color:"#fff"},children:a.symbol})]}),e.jsxs("div",{style:{color:"rgba(255, 255, 255, 0.6)"},children:[a.shares," @ $",a.price.toFixed(2)]})]},a.id)),i.trades.length>3&&e.jsxs("button",{style:{width:"100%",padding:"0.5rem",background:"transparent",border:"1px dashed rgba(255, 255, 255, 0.2)",borderRadius:"8px",color:"rgba(255, 255, 255, 0.5)",cursor:"pointer"},onClick:()=>t("log"),children:["View all ",i.trades.length," trades"]})]})]})]}),s==="signals"&&e.jsx(V,{signals:y,selectedStock:c,onStockSelect:r,isAnalyzing:!1}),s==="log"&&e.jsx(E,{trades:i.trades})]})]})]})}export{Y as default};
